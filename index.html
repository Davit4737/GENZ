<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GENZ — Presale</title>
  <meta name="description" content="GENZ — meme coin. Presale landing (HTML/CSS/JS)." />
  <meta name="robots" content="noindex,nofollow" />
  <style>
    :root{
      --bg1:#0f1724;
      --muted-weak:rgba(255,255,255,0.60);
      --card-bg: rgba(6,10,20,0.62);
      --yellow-1:#ffd60a;
      --yellow-2:#ffb300;
      --maxw:1100px;
      --accent:#7dd3fc;
      --panel-bg:#071025;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;color:#fff;background-color:var(--bg1);position:relative;overflow-x:hidden}
    .bg{position:fixed;inset:0;background-image:url('./img/IMG_0606.PNG');background-size:cover;background-position:center;z-index:0;filter:saturate(0.9) contrast(0.9);transform:translateZ(0)}
    .bg::after{content:'';position:absolute;inset:0;background:linear-gradient(180deg,rgba(2,6,23,0.75),rgba(2,8,25,0.85));z-index:1;pointer-events:none}
    .wrap{max-width:var(--maxw);margin:28px auto;padding:24px;position:relative;z-index:2}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:6px}
    .brand{display:flex;gap:14px;align-items:center}
    .logo{width:110px;height:110px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:2px solid rgba(255,255,255,0.06);flex-shrink:0}
    .logo img{width:110%;height:110%;object-fit:cover;display:block;transform:scale(1.02)}
    .brand .title{font-weight:800;font-size:16px}
    nav{display:flex;gap:14px;align-items:center}
    nav a{color:var(--muted-weak);text-decoration:none;font-size:14px;padding:8px 10px;border-radius:10px;transition:all .18s}
    .btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(135deg,var(--yellow-1),var(--yellow-2));color:#0b1220;font-weight:800;padding:10px 18px;border-radius:14px;border:0;cursor:pointer;position:relative;z-index:1000}
    .grid{display:grid;grid-template-columns:1fr;gap:24px;margin-top:6px}
    @media(min-width:960px){.grid{grid-template-columns:1fr 420px}}
    .card{background:var(--card-bg);border:1px solid rgba(255,255,255,0.04);padding:18px;border-radius:14px;box-shadow:0 8px 30px rgba(2,6,23,0.6);backdrop-filter:blur(6px)}
    h1{margin:0;font-size:34px}
    p.lead{color:var(--muted-weak);margin-top:8px}
    .stats{display:flex;gap:12px;margin-top:16px}
    .stat{background: rgba(3,6,13,0.48); padding:12px;border-radius:10px;flex:1}
    .progress{margin-top:14px}
    .bar{height:12px;background:rgba(255,255,255,0.04);border-radius:999px;overflow:hidden;border:1px solid rgba(0,0,0,0.35)}
    .bar-inner{height:100%;width:15%;background:linear-gradient(90deg,var(--yellow-1),var(--yellow-2));transition:width .9s}
    .bar-row{display:flex;justify-content:space-between;font-size:13px;color:var(--muted-weak);margin-top:8px}
    .countdown{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    table{width:100%;border-collapse:collapse;margin-top:10px;font-size:14px;color:var(--muted-weak)}
    td,th{padding:8px;border-bottom:1px dashed rgba(255,255,255,0.03)}
    footer{color:var(--muted-weak);font-size:13px;margin-top:18px;text-align:center}
    .input{padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.25);color:#fff;flex:1}
    @media(max-width:600px){h1{font-size:22px}.logo{width:86px;height:86px}.logo img{width:100%;height:100%;transform:none}}

    /* modal */
    .genz-modal-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:20000}
    .genz-modal{width:520px;max-width:95%;background:var(--panel-bg);border-radius:12px;padding:18px;color:#fff;position:relative;box-shadow:0 12px 40px rgba(0,0,0,0.6)}
    .genz-close{position:absolute;right:12px;top:8px;cursor:pointer;color:#ffd60a;font-weight:700}
    .genz-input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:#fff;margin-top:8px}
    .genz-btn{padding:10px 12px;border-radius:10px;background:linear-gradient(135deg,#ffd60a,#ffb300);border:0;cursor:pointer;font-weight:700}
    .genz-secondary{padding:8px 10px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.06);cursor:pointer;color:#fff;margin-left:8px}
    .genz-small{font-size:13px;color:rgba(255,255,255,0.75);margin-top:8px}

    /* currency toggle */
    .currency-toggle{display:flex;gap:8px;margin-top:8px}
    .currency-toggle button{flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:#e6eef6;cursor:pointer}
    .currency-toggle button.active{background:#07263a;color:#fff;border-color:rgba(125,211,252,0.28);box-shadow:0 4px 14px rgba(7,38,58,0.6)}
    .info-line{color:var(--muted-weak);margin-top:10px}

    /* NAV always visible and mobile-friendly */
    nav#mainNav {display:flex;gap:12px;align-items:center;max-width: 100%;overflow-x: auto;-webkit-overflow-scrolling: touch;padding: 6px 0;flex-wrap: nowrap}
    nav#mainNav a { white-space: nowrap; color: #e6eef6; text-decoration: none; padding:8px 10px; border-radius:10px; transition: all .12s; }
    nav#mainNav a:hover, nav#mainNav a:active { color:#fff; background: rgba(255,255,255,0.03); }
    nav#mainNav a.btn { color: #0b1220; }
    @media (max-width: 900px) {
      nav#mainNav a { display: none !important; visibility: hidden !important; opacity: 0 !important; height: 0 !important; padding: 0 !important; margin: 0 !important; }
      nav#mainNav { justify-content: flex-end; }
      #mobileFallbackBuy { display: inline-flex !important; align-items:center; gap:8px; }
    }

    /* socials */
    .socials { display:flex; gap:8px; align-items:center; margin-left:8px; }
    .socials a { display:inline-flex; align-items:center; justify-content:center; width:38px; height:38px; border-radius:10px; background: rgba(255,255,255,0.02); text-decoration:none; transition:all .12s; }
    .socials a:hover { transform:translateY(-2px); background: rgba(255,255,255,0.04); }
    .socials svg { width:20px; height:20px; display:block; fill: #e6eef6; }
    .socials-side { display:flex; gap:8px; margin-top:10px; }
    .socials-side a { display:inline-flex; gap:8px; align-items:center; padding:6px 8px; border-radius:10px; background: rgba(255,255,255,0.02); text-decoration:none; color:var(--muted-weak); font-size:13px; transition:all .12s; }
    .socials-side a:hover { background: rgba(255,255,255,0.03); color:#fff; }
    .socials-side svg { width:18px; height:18px; fill: #e6eef6; }
    #mobileFallbackBuy { display: none; position: fixed; right: 14px; bottom: 18px; z-index: 25000; background: linear-gradient(135deg,#ffd60a,#ffb300); color:#071025; padding: 12px 14px; border-radius: 14px; font-weight:800; box-shadow: 0 8px 30px rgba(0,0,0,0.45); border: none; }

    /* Whitepaper fullscreen panel:
       uses the requested photo as background (cover), with a dark gradient overlay
       so the text stays readable on top of the image. */
    .wp-panel { position:fixed; inset:0; z-index:30000; display:none; background:linear-gradient(180deg, rgba(2,6,23,0.95), rgba(2,6,23,0.98)); }
    .wp-inner { 
      max-width:1200px; 
      margin:48px auto; 
      /* photo as background + dark gradient overlay for contrast */
      background: linear-gradient(180deg, rgba(6,10,20,0.92), rgba(6,10,20,0.6)), url('./img/41bef794-cc43-4dc0-a9cf-6504b5b0db48-wm.png'); 
      background-size: cover; 
      background-position: center; 
      border-radius:12px; 
      display:block; 
      padding:28px; 
      height:calc(100% - 96px); 
      overflow:auto; 
      box-shadow:0 30px 80px rgba(0,0,0,0.8); 
      color: #fff;
    }
    .wp-content { color:rgba(255,255,255,0.95); font-size:15px; line-height:1.6; max-width:1000px; margin:0 auto; background: transparent; }
    .wp-title { font-size:26px; font-weight:800; margin-bottom:8px; color:#fff; text-align:center; }
    .wp-section { margin-bottom:18px; }
    .wp-section h4 { margin:0 0 8px 0; font-size:18px; color:var(--yellow-1); }
    .wp-close { position:absolute; right:34px; top:28px; background:transparent; border:1px solid rgba(255,255,255,0.06); color:#ffd60a; padding:8px 10px; border-radius:8px; cursor:pointer; font-weight:700; }

    @media (max-width: 900px) {
      .wp-inner { margin:24px; padding:18px; height:calc(100% - 56px); }
      .wp-title { font-size:20px; }
    }

  </style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>

  <div class="wrap">
    <header>
      <div class="brand" role="banner">
        <div class="logo" aria-label="GENZ logo">
          <img src="./img/IMG_0605.PNG" alt="GENZ logo">
        </div>
        <div>
          <div class="title">GENZ — Presale</div>
          <div class="sub">Nickname: <strong>GENZ</strong></div>
        </div>
      </div>

      <nav role="navigation" aria-label="Top navigation" id="mainNav">
        <a href="#tokenomics" class="nav-link">Tokenomics</a>
        <a href="#roadmap" class="nav-link">Roadmap</a>
        <a href="#faq" class="nav-link">FAQ</a>
        <a class="btn nav-link" href="#buy" id="navBuy">Buy</a>
      </nav>

      <div class="socials" aria-hidden="false">
        <a href="https://x.com/1genztoken?s=21" target="_blank" rel="noopener noreferrer" aria-label="GENZ в X (Twitter)">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M21.9 5.2c-.6.3-1.2.5-1.8.6.7-.4 1.2-1 1.5-1.8-.6.4-1.3.7-2.1.9C18.8 3.9 17.8 3.5 16.7 3.5c-1.9 0-3.4 1.6-3.4 3.5 0 .3 0 .7.1 1C9.9 7.9 7.1 6.4 5.1 4c-.4.6-.6 1.3-.6 2.1 0 1.2.6 2.3 1.6 3-.5 0-1-.2-1.4-.4 0 1.9 1.3 3.5 3 3.9-.4.1-.8.1-1.2.1-.3 0-.5 0-.8-.1.5 1.7 2 3 3.8 3-1.4 1.1-3.1 1.7-5 1.7-.3 0-.6 0-.9-.1 1.8 1.1 3.9 1.7 6.2 1.7 7.4 0 11.4-6.4 11.4-11.9v-.5c.8-.6 1.5-1.3 2-2.1"/></svg>
        </a>
        <a href="https://t.me/+cCBIPuvYv7UwNjNi" target="_blank" rel="noopener noreferrer" aria-label="GENZ в Telegram">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M21.6 3.1c-.2-.3-.5-.4-.9-.3L2.6 9.1c-.5.1-.6.6-.2.9l4 3.1 1.7 5.6c.2.6.9.8 1.4.4l2.6-2 4.9 3.6c.5.4 1.1.1 1.2-.6l3.2-17.8c.1-.5-.1-1-.7-1.2zM9.6 14.3L6.8 12.5l8.3-3.3-5.5 5.1z"/></svg>
        </a>
      </div>
    </header>

    <main class="grid">
      <section>
        <div class="card">
          <h1>GENZ — next-generation meme coin</h1>
          <p class="lead">GENZ — memecoin for the new generation. This is the official presale page. Presale opens soon on Solana. Verify the contract address before participating; never share private keys.</p>

          <div class="stats">
            <div class="stat">
              <small>Market Cap</small>
              <strong>$200,000</strong>
            </div>
          </div>

          <div class="progress">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div class="muted small">Stage</div>
              <div class="muted small">Token price</div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:6px">
              <div><strong id="stageName">Presale — Stage 1</strong></div>
              <div><strong id="tokenPrice">$0.02 / GENZ</strong></div>
            </div>
            <div class="bar" aria-hidden="true" style="margin-top:10px">
              <div class="bar-inner" id="barInner" style="width:15%"></div>
            </div>
            <div class="bar-row"><span id="pct">15% Stage progress</span><span class="muted small">of stage target</span></div>
          </div>

          <div style="margin-top:18px" id="buy">
            <div class="muted small">Presale status</div>
            <div class="countdown" id="countdown"><!-- JS fills --></div>

            <div style="display:flex;flex-direction:column;align-items:center;gap:10px;margin-top:16px">
              <div class="muted small">Current stage: <strong id="stageLabel">Presale</strong></div>
              <div style="display:flex;gap:10px;align-items:center">
                <div style="padding:10px 12px;border-radius:10px;background:rgba(255,255,255,0.03);font-weight:700">Price: <span id="buyPrice">$0.02</span></div>
                <button class="btn" id="simpleBuy">Buy</button>
              </div>
            </div>

            <p class="muted small" style="margin-top:8px">Use the Connect wallet button to participate when presale is live. All purchases interact with the verified presale contract on Solana. Never share private keys.</p>
            <div id="walletNotice"></div>
          </div>
        </div>

        <div class="card" style="margin-top:16px" id="tokenomics">
          <h3>Tokenomics</h3>
          <p class="muted small">Transparency &gt; hype. Example allocation below.</p>
          <table>
            <tr><td>Total Supply</td><td class="right">1,000,000,000</td></tr>
            <tr><td>Presale</td><td class="right">20%</td></tr>
            <tr><td>Liquidity</td><td class="right">30%</td></tr>
            <tr><td>Team (vesting)</td><td class="right">10%</td></tr>
            <tr><td>Marketing / Growth</td><td class="right">20%</td></tr>
            <tr><td>Airdrop / Community</td><td class="right">10%</td></tr>
          </table>
        </div>

        <div class="card" style="margin-top:16px" id="roadmap">
          <h3>Roadmap</h3>
          <ol class="muted small">
            <li>Presale & private listings</li>
            <li>CEX / DEX listings, liquidity add</li>
            <li>Marketing push, community events, merch</li>
          </ol>
        </div>

        <div class="card" style="margin-top:16px" id="whitepaper">
          <h3>White Paper</h3>
          <p class="muted small">Краткий обзор и цели проекта — в white paper. Ниже — выдержка и кнопка загрузки полного документа.</p>
          <div style="margin-top:8px" class="muted small">
            <strong>GENZ — краткое описание</strong>
            <p style="margin-top:8px">GENZ — мем-монета, созданная для сообщества, с акцентом на простоту участия и прозрачность. Основные цели: устойчивый ликвидити-пул, честный листинг, активное сообщество и мерч. Технически: токен на Solana с моделью распределения 20% presale, 30% liquidity, 10% команде (с вестингом).</p>
          </div>
          <div style="display:flex;gap:8px;margin-top:12px">
            <button id="downloadWhitepaper" class="btn">Download White Paper</button>
            <!-- inline view removed as requested -->
            <button id="openWhitepaperFull" class="btn" style="background:linear-gradient(135deg,#7dd3fc,#4fd1c5);color:#02121a">Open White Paper (Fullscreen)</button>
          </div>
        </div>

        <div class="card" style="margin-top:16px" id="faq">
          <h3>FAQ</h3>
          <details>
            <summary>How do I verify the contract?</summary>
            <div class="muted small" style="margin-top:8px">Copy the contract address and check its code and transactions on Solscan. The official verified address will be published prior to presale.</div>
          </details>
          <details style="margin-top:8px">
            <summary>How do I participate?</summary>
            <div class="muted small" style="margin-top:8px">Connect a wallet (Phantom for SOL). Use the Buy button to pay. Do not share private keys.</div>
          </details>
        </div>
      </section>

      <aside>
        <div class="card">
          <h3>Subscribe</h3>
          <p class="muted small">Subscribe for Whiteface Alerts, Contracts, Publications, Official Announcements.</p>
          <form id="subscribeForm" class="subscribe" onsubmit="return false">
            <input id="email" class="input" placeholder="Email" />
            <button id="subBtn" class="btn">Subscribe</button>
          </form>
          <div id="subMsg" class="muted small" style="margin-top:8px"></div>

          <div style="margin-top:12px">
            <div class="socials-side" aria-hidden="false">
              <a href="https://x.com/1genztoken?s=21" target="_blank" rel="noopener noreferrer" aria-label="GENZ в X">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M21.9 5.2c-.6.3-1.2.5-1.8.6.7-.4 1.2-1 1.5-1.8-.6.4-1.3.7-2.1.9C18.8 3.9 17.8 3.5 16.7 3.5c-1.9 0-3.4 1.6-3.4 3.5 0 .3 0 .7.1 1C9.9 7.9 7.1 6.4 5.1 4c-.4.6-.6 1.3-.6 2.1 0 1.2.6 2.3 1.6 3-.5 0-1-.2-1.4-.4 0 1.9 1.3 3.5 3 3.9-.4.1-.8.1-1.2.1-.3 0-.5 0-.8-.1.5 1.7 2 3 3.8 3-1.4 1.1-3.1 1.7-5 1.7-.3 0-.6 0-.9-.1 1.8 1.1 3.9 1.7 6.2 1.7 7.4 0 11.4-6.4 11.4-11.9v-.5c.8-.6 1.5-1.3 2-2.1\"/></svg>
                <span style="margin-left:8px">X</span>
              </a>
              <a href="https://t.me/+cCBIPuvYv7UwNjNi" target="_blank" rel="noopener noreferrer" aria-label="GENZ в Telegram">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M21.6 3.1c-.2-.3-.5-.4-.9-.3L2.6 9.1c-.5.1-.6.6-.2.9l4 3.1 1.7 5.6c.2.6.9.8 1.4.4l2.6-2 4.9 3.6c.5.4 1.1.1 1.2-.6l3.2-17.8c.1-.5-.1-1-.7-1.2zM9.6 14.3L6.8 12.5l8.3-3.3-5.5 5.1z\"/></svg>
                <span style="margin-left:8px">Telegram</span>
              </a>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h4>Disclaimer</h4>
          <p class="muted small">GENZ presale page. Not financial advice. Verify transactions on Solana explorer / Polygon explorer before assuming anything.</p>
        </div>
      </aside>
    </main>

    <footer>
      <div style="display:flex;justify-content:center;gap:12px;align-items:center;flex-wrap:wrap;">
        <div class="muted small">© 2025 GENZ — all rights reserved.</div>
        <div style="opacity:.8">|</div>
        <div style="display:flex;gap:8px;align-items:center;">
          <a href="https://x.com/1genztoken?s=21" target="_blank" rel="noopener noreferrer" aria-label="GENZ X" style="text-decoration:none;color:inherit;">
            <svg style="vertical-align:middle" viewBox="0 0 24 24" width="18" height="18"><path d="M21.9 5.2c-.6.3-1.2.5-1.8.6.7-.4 1.2-1 1.5-1.8-.6.4-1.3.7-2.1.9C18.8 3.9 17.8 3.5 16.7 3.5c-1.9 0-3.4 1.6-3.4 3.5 0 .3 0 .7.1 1C9.9 7.9 7.1 6.4 5.1 4c-.4.6-.6 1.3-.6 2.1 0 1.2.6 2.3 1.6 3-.5 0-1-.2-1.4-.4 0 1.9 1.3 3.5 3 3.9-.4.1-.8.1-1.2.1-.3 0-.5 0-.8-.1.5 1.7 2 3 3.8 3-1.4 1.1-3.1 1.7-5 1.7-.3 0-.6 0-.9-.1 1.8 1.1 3.9 1.7 6.2 1.7 7.4 0 11.4-6.4 11.4-11.9v-.5c.8-.6 1.5-1.3 2-2.1\"/></svg>
          </a>
          <a href="https://t.me/+cCBIPuvYv7UwNjNi" target="_blank" rel="noopener noreferrer" aria-label="GENZ Telegram" style="text-decoration:none;color:inherit;">
            <svg style="vertical-align:middle" viewBox="0 0 24 24" width="18" height="18"><path d="M21.6 3.1c-.2-.3-.5-.4-.9-.3L2.6 9.1c-.5.1-.6.6-.2.9l4 3.1 1.7 5.6c.2.6.9.8 1.4.4l2.6-2 4.9 3.6c.5.4 1.1.1 1.2-.6l3.2-17.8c.1-.5-.1-1-.7-1.2zM9.6 14.3L6.8 12.5l8.3-3.3-5.5 5.1z"/></svg>
          </a>
        </div>
      </div>
    </footer>
  </div>

  <!-- floating fallback buy (visible on mobile) -->
  <button id="mobileFallbackBuy" type="button" aria-hidden="false">Buy</button>

  <!-- Whitepaper fullscreen panel -->
  <div id="whitepaperPanel" class="wp-panel" role="dialog" aria-modal="true" tabindex="-1">
    <button id="wpClose" class="wp-close">CLOSE</button>
    <div class="wp-inner">
      <div class="wp-content" id="wpContent">
        <div class="wp-title">GENZ — White Paper</div>

        <div class="wp-section">
          <h4>Vision</h4>
          <p>GENZ создаётся как сообщество-ориентированный мемкойн с прозрачной моделью и поэтапной продажей. Цель — дать пользователям честный вход, стабильную ликвидность и возможности для комьюнити-вознаграждений и мерча.</p>
        </div>

        <div class="wp-section">
          <h4>Tokenomics</h4>
          <ul>
            <li>Total supply: 1,000,000,000 GENZ</li>
            <li>Presale: 20%</li>
            <li>Liquidity: 30%</li>
            <li>Team (vesting): 10%</li>
            <li>Marketing / Growth: 20%</li>
            <li>Airdrop / Community: 10%</li>
          </ul>
        </div>

        <div class="wp-section">
          <h4>Roadmap</h4>
          <ol>
            <li>Подготовка пресейла и аудит базовых контрактов</li>
            <li>Листинг на DEX/CEX, обеспечение ликвидности</li>
            <li>Масштабный маркетинг, мероприятия для комьюнити, релиз мерча</li>
          </ol>
        </div>

        <div class="wp-section">
          <h4>Security & Verification</h4>
          <p>Контракты публикуются и верифицируются на обозревателях (Solscan). Никогда не делитесь приватными клавишами. Аудит рекомендуется перед массовым листингом.</p>
        </div>

        <div class="wp-section">
          <h4>Team & Vesting</h4>
          <p>Доля команды блокируется и распределяется по заранее объявленному графику (vesting).</p>
        </div>

        <div class="wp-section">
          <h4>Legal & Risk</h4>
          <p>GENZ не даёт финансовых гарантий. Участие в пресейле несёт риски. Инвесторы должны проводить собственную проверку и учитывать возможные ограничения в их юрисдикциях.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- load solana web3 (CDN) - single include -->
  <script src="https://unpkg.com/@solana/web3.js@1.75.0/lib/index.iife.min.js"></script>

  <script>
  (function(){

    /* lightweight helpers */
    function $(id){ return document.getElementById(id); }
    function safeAddListener(el, evt, fn, opts){
      try{ el.addEventListener(evt, fn, opts); } catch(e){ el.addEventListener(evt, fn, false); }
    }

    /* robust tap installer */
    function addTap(el, handler){
      if(!el) return;
      if(el.__tap_installed) return;
      el.__tap_installed = true;

      const wrapped = function(e){
        try{ e.preventDefault(); e.stopPropagation(); }catch(err){}
        handler(e);
      };

      try {
        el.addEventListener('touchend', wrapped, {passive:false});
      } catch(err) {
        el.addEventListener('touchend', wrapped, false);
      }
      el.addEventListener('pointerup', wrapped, {passive:false});
      el.addEventListener('click', wrapped, {passive:false});

      el.style.zIndex = 20000;
      el.style.pointerEvents = 'auto';
    }

    // === YOUR SOL ADDRESS ===
    const SOL_ADDRESS = '22EgzkhQcDbxSgXKqqP6oqfzzHtsHSsSGuWzuVj4qAbE';

    // Connection: change 'devnet' for safe testing or 'mainnet-beta' for live
    const NETWORK = 'mainnet-beta'; // change to 'devnet' while testing
    const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl(NETWORK), 'confirmed');

    /* function to create the modal (global) */
    window.openBuyModal = function(opts){
      opts = opts || {};
      if (document.getElementById('__genz_modal')) return; // already open

      // Create overlay and modal
      const overlay = document.createElement('div'); overlay.id='__genz_modal'; overlay.className='genz-modal-overlay';
      const box = document.createElement('div'); box.className='genz-modal';
      overlay.appendChild(box);

      // close button
      const close = document.createElement('div'); close.className='genz-close'; close.textContent='✕';
      addTap(close, function(){
        // clear interval if exists and remove modal
        if (overlay._ratesInterval) { clearInterval(overlay._ratesInterval); overlay._ratesInterval = null; }
        overlay.remove();
      });
      box.appendChild(close);

      // title/desc
      const title = document.createElement('h3'); title.textContent = 'Buy GENZ';
      box.appendChild(title);
      const desc = document.createElement('div'); desc.className='genz-small';
      desc.textContent = 'Выберите валюту и сумму. Phantom будет предложен для подписи и отправки транзакции.';
      box.appendChild(desc);

      // currency toggle
      const currencyToggle = document.createElement('div'); currencyToggle.className='currency-toggle';
      const btnSOL = document.createElement('button'); btnSOL.type='button'; btnSOL.textContent='SOL'; btnSOL.dataset.currency='SOL';
      const btnUSDT = document.createElement('button'); btnUSDT.type='button'; btnUSDT.textContent='USDT'; btnUSDT.dataset.currency='USDT';
      const btnBTC = document.createElement('button'); btnBTC.type='button'; btnBTC.textContent='BTC'; btnBTC.dataset.currency='BTC';
      currencyToggle.appendChild(btnSOL); currencyToggle.appendChild(btnUSDT); currencyToggle.appendChild(btnBTC);
      box.appendChild(currencyToggle);

      // inputs
      const usdInput = document.createElement('input'); usdInput.className='genz-input'; usdInput.type='number'; usdInput.placeholder='Сумма в USD (например 10)';
      const cryptoInput = document.createElement('input'); cryptoInput.className='genz-input'; cryptoInput.type='number'; cryptoInput.placeholder='Сумма в крипто (например 0.01)';
      box.appendChild(usdInput); box.appendChild(cryptoInput);

      const infoLine = document.createElement('div'); infoLine.className='info-line'; infoLine.textContent = 'Курсы: загружаю...';
      box.appendChild(infoLine);

      const resultLine = document.createElement('div'); resultLine.className='genz-small'; resultLine.style.fontWeight='700'; resultLine.textContent = 'GENZ: —';
      box.appendChild(resultLine);

      const row = document.createElement('div'); row.style.marginTop='12px';
      const payBtn = document.createElement('button'); payBtn.className='genz-btn'; payBtn.textContent='Pay with SOL (Phantom)';
      const openPhantomBtn = document.createElement('button'); openPhantomBtn.className='genz-secondary'; openPhantomBtn.textContent='Open in Phantom';
      const copyBtn = document.createElement('button'); copyBtn.className='genz-secondary'; copyBtn.textContent='Copy address (USDT/BTC)';
      row.appendChild(payBtn); row.appendChild(openPhantomBtn); row.appendChild(copyBtn);
      box.appendChild(row);

      document.body.appendChild(overlay);

      // --- LIVE RATES: CoinGecko ---
      let rates = { sol: 25.0, btc: 60000.0, usdt: 1.0 };
      let ratesFetched = false;
      const COINGECKO_URL = 'https://api.coingecko.com/api/v3/simple/price?ids=solana,bitcoin,tether&vs_currencies=usd';

      async function fetchRatesAndUpdateUI(){
        try {
          const resp = await fetch(COINGECKO_URL);
          if (!resp.ok) throw new Error('API ' + resp.status);
          const data = await resp.json();
          if (data && data.solana && data.bitcoin && data.tether) {
            rates.sol = Number(data.solana.usd) || rates.sol;
            rates.btc = Number(data.bitcoin.usd) || rates.btc;
            rates.usdt = Number(data.tether.usd) || rates.usdt;
            ratesFetched = true;
            infoLine.textContent = `Курсы: SOL ≈ $${rates.sol.toFixed(2)}, BTC ≈ $${rates.btc.toFixed(2)}, USDT ≈ $${rates.usdt.toFixed(2)}`;
          } else {
            throw new Error('unexpected API response');
          }
        } catch (err) {
          console.warn('Failed to fetch rates:', err);
          infoLine.textContent = `Курсы: недоступны, показаны примерные значения (demo).`;
        }
        recompute();
      }

      // initial fetch + periodic refresh
      fetchRatesAndUpdateUI();
      overlay._ratesInterval = setInterval(fetchRatesAndUpdateUI, 60 * 1000);

      // recompute & UI helpers
      let curr = 'SOL';
      function setActive(c){
        curr = c;
        [btnSOL,btnUSDT,btnBTC].forEach(b => b.classList.toggle('active', b.dataset.currency === c));
        recompute();
      }
      function recompute(){
        const usd = parseFloat(usdInput.value || 0);
        const crypto = parseFloat(cryptoInput.value || 0);
        let usdEffective = usd;
        if (crypto > 0){
          if (curr === 'SOL') usdEffective = crypto * rates.sol;
          else if (curr === 'BTC') usdEffective = crypto * rates.btc;
          else if (curr === 'USDT') usdEffective = crypto;
        }
        const genz = usdEffective > 0 ? Math.floor(usdEffective / 0.0001) : 0;
        resultLine.textContent = `GENZ: ${genz.toLocaleString()} (≈ $${usdEffective.toFixed(2)}) — ${curr}`;
      }

      [btnSOL,btnUSDT,btnBTC].forEach(b=>{
        addTap(b, ()=> { setActive(b.dataset.currency); });
      });
      usdInput.addEventListener('input', ()=> { cryptoInput.value = ''; recompute(); });
      cryptoInput.addEventListener('input', ()=> { usdInput.value = ''; recompute(); });

      // fallback copy
      copyBtn.addEventListener('click', async ()=>{
        let addr = '';
        if (curr === 'USDT') addr = '0x...USDT';
        else if (curr === 'BTC') addr = 'bc1qexamplebtcaddress...';
        else addr = SOL_ADDRESS;
        try{
          await navigator.clipboard.writeText(addr);
          resultLine.textContent = 'Адрес скопирован в буфер.';
        }catch(e){
          const ta = document.createElement('textarea'); ta.value = addr; document.body.appendChild(ta); ta.select();
          try{ document.execCommand('copy'); resultLine.textContent = 'Адрес скопирован (fallback).'; }catch(err){ resultLine.textContent = 'Не удалось скопировать. Скопируй вручную: ' + addr; }
          document.body.removeChild(ta);
        }
      });

      // Open in Phantom deep-link (manual fallback)
      openPhantomBtn.addEventListener('click', ()=>{
        if (curr !== 'SOL'){ resultLine.textContent = 'Open in Phantom для SOL только.'; return; }
        const usd = parseFloat(usdInput.value||0);
        const crypto = parseFloat(cryptoInput.value||0);
        let solAmount = crypto > 0 ? crypto : (usd > 0 ? (usd / rates.sol) : 0);
        if (!solAmount || solAmount <= 0){ resultLine.textContent = 'Введите сумму в USD или SOL.'; return; }
        const url = 'https://phantom.app/ul/transfer?address=' + encodeURIComponent(SOL_ADDRESS) + '&amount=' + encodeURIComponent(solAmount);
        window.location.href = url;
      });

      // Pay: build real Solana transfer tx and ask Phantom to send it
      payBtn.addEventListener('click', async ()=>{
        const usd = parseFloat(usdInput.value||0);
        const crypto = parseFloat(cryptoInput.value||0);
        let solAmount = crypto > 0 ? crypto : (usd > 0 ? (usd / rates.sol) : 0);
        if (!solAmount || solAmount <= 0){ resultLine.textContent = 'Введите сумму в USD или SOL.'; return; }

        // detect provider (Phantom)
        const provider = (window.solana && (window.solana.isPhantom ? window.solana : (Array.isArray(window.solana && window.solana.providers) ? window.solana.providers.find(p=>p.isPhantom) : null))) || null;

        // lamports
        const lamports = Math.round(solAmount * solanaWeb3.LAMPORTS_PER_SOL);

        if (provider && provider.isPhantom){
          try{
            resultLine.textContent = 'Подключаю Phantom...';
            await provider.connect();

            const fromPubkey = provider.publicKey;
            if (!fromPubkey){
              resultLine.textContent = 'Не удалось получить публичный ключ из Phantom.';
              return;
            }

            resultLine.textContent = 'Формирую транзакцию...';

            const toPubkey = new solanaWeb3.PublicKey(SOL_ADDRESS);

            // create transaction and transfer instruction
            const tx = new solanaWeb3.Transaction().add(
              solanaWeb3.SystemProgram.transfer({
                fromPubkey: fromPubkey,
                toPubkey: toPubkey,
                lamports: lamports
              })
            );

            // set fee payer & recent blockhash
            tx.feePayer = fromPubkey;
            const { blockhash } = await connection.getLatestBlockhash();
            tx.recentBlockhash = blockhash;

            resultLine.textContent = 'Открываю Phantom для подписи и отправки транзакции...';

            // Try provider.sendTransaction (recommended) or fallback to sign & send
            if (typeof provider.sendTransaction === 'function'){
              const signature = await provider.sendTransaction(tx, connection);
              resultLine.innerHTML = 'Транзакция отправлена, ожидание подтверждения... txid: <code>' + signature + '</code>';
              const explorerUrl = 'https://explorer.solana.com/tx/' + signature + (NETWORK === 'devnet' ? '?cluster=devnet' : '');
              await connection.confirmTransaction(signature, 'confirmed');
              resultLine.innerHTML = 'Платёж подтверждён. <a href="' + explorerUrl + '" target="_blank" rel="noopener noreferrer">Посмотреть в Explorer</a><br><small>txid: ' + signature + '</small>';
              // clear interval
              if (overlay._ratesInterval) { clearInterval(overlay._ratesInterval); overlay._ratesInterval = null; }
            } else if (typeof provider.signAndSendTransaction === 'function'){
              const signed = await provider.signAndSendTransaction(tx);
              const signature = signed && (signed.signature || signed);
              resultLine.innerHTML = 'Транзакция отправлена, ожидание подтверждения... txid: <code>' + signature + '</code>';
              const explorerUrl = 'https://explorer.solana.com/tx/' + signature + (NETWORK === 'devnet' ? '?cluster=devnet' : '');
              await connection.confirmTransaction(signature, 'confirmed');
              resultLine.innerHTML = 'Платёж подтверждён. <a href="' + explorerUrl + '" target="_blank" rel="noopener noreferrer">Посмотреть в Explorer</a><br><small>txid: ' + signature + '</small>';
              if (overlay._ratesInterval) { clearInterval(overlay._ratesInterval); overlay._ratesInterval = null; }
            } else if (typeof provider.signTransaction === 'function'){
              const signedTx = await provider.signTransaction(tx);
              const raw = signedTx.serialize();
              const signature = await connection.sendRawTransaction(raw, { skipPreflight: false });
              resultLine.innerHTML = 'Транзакция отправлена, ожидание подтверждения... txid: <code>' + signature + '</code>';
              const explorerUrl = 'https://explorer.solana.com/tx/' + signature + (NETWORK === 'devnet' ? '?cluster=devnet' : '');
              await connection.confirmTransaction(signature, 'confirmed');
              resultLine.innerHTML = 'Платёж подтверждён. <a href="' + explorerUrl + '" target="_blank" rel="noopener noreferrer">Посмотреть в Explorer</a><br><small>txid: ' + signature + '</small>';
              if (overlay._ratesInterval) { clearInterval(overlay._ratesInterval); overlay._ratesInterval = null; }
            } else {
              resultLine.textContent = 'Phantom установлен, но не поддерживает нужные методы. Используйте кнопку "Open in Phantom" или deeplink.';
            }

          }catch(err){
            console.error(err);
            resultLine.textContent = 'Ошибка: ' + (err && err.message ? err.message : String(err));
          }
        } else {
          // fallback deep link if provider not found (mobile / no extension)
          resultLine.textContent = 'Phantom не обнаружен — открою ссылку для оплаты.';
          const url = 'https://phantom.app/ul/transfer?address=' + encodeURIComponent(SOL_ADDRESS) + '&amount=' + encodeURIComponent(solAmount);
          // clear interval before redirect
          if (overlay._ratesInterval) { clearInterval(overlay._ratesInterval); overlay._ratesInterval = null; }
          window.location.href = url;
        }
      });

      // default active
      setActive('SOL');

      // close on overlay click outside modal (clear interval too)
      overlay.addEventListener('click', function(e){
        if (e.target === overlay) {
          if (overlay._ratesInterval) { clearInterval(overlay._ratesInterval); overlay._ratesInterval = null; }
          overlay.remove();
        }
      });

      return overlay;
    }; // openBuyModal

    /* attach handlers to Buy buttons and nav Buy with robust listeners */
    function attachAllBuyHandlers(){
      const simple = $('simpleBuy');
      if (simple) addTap(simple, function(){ openBuyModal({ autoTier: null }); });

      const navBuy = $('navBuy');
      if (navBuy) addTap(navBuy, function(){ openBuyModal({ autoTier: null }); });

      const fallback = $('mobileFallbackBuy');
      if (fallback) addTap(fallback, function(){ openBuyModal({ autoTier: null }); });

      // touchend fallback for simpleBuy region
      document.addEventListener('touchend', function(e){
        if (document.getElementById('__genz_modal')) return;
        const t = e.changedTouches && e.changedTouches[0];
        if (!t) return;
        const x = t.clientX, y = t.clientY;
        const el = $('simpleBuy');
        if (!el) return;
        const r = el.getBoundingClientRect();
        if (x >= r.left - 8 && x <= r.right + 8 && y >= r.top - 8 && y <= r.bottom + 8){
          openBuyModal({ autoTier: null });
        }
      }, {passive:true});
    }

    if (document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', attachAllBuyHandlers);
    } else {
      attachAllBuyHandlers();
    }

    // ensure nav visible on desktop
    (function ensureNavVisible(){
      const nav = document.getElementById('mainNav');
      if (nav){
        nav.style.display = 'flex';
        nav.style.visibility = 'visible';
      }
    })();

    // subscribe form minimal
    if (document.getElementById('subscribeForm')){
      document.getElementById('subscribeForm').addEventListener('submit', function(e){
        e.preventDefault();
        const email = (document.getElementById('email')||{}).value || '';
        const msg = document.getElementById('subMsg');
        if (!email.trim()){ if(msg) msg.textContent = 'Введите email.'; return; }
        if(msg) msg.textContent = 'Подписка принята (заглушка).';
      });
    }

    // Whitepaper download (excerpt)
    const whiteText = [
"GENZ — White Paper (excerpt)",
"",
"1. Vision",
"GENZ aims to be a community-driven memecoin with clear tokenomics, staged presale and a focus on transparency.",
"",
"2. Tokenomics (summary)",
"- Total supply: 1,000,000,000",
"- Presale: 20%",
"- Liquidity: 30%",
"- Team (vesting): 10%",
"- Marketing / Growth: 20%",
"- Airdrop / Community: 10%",
"",
"3. Roadmap (high level)",
"- Presale & private listings",
"- CEX / DEX listings, liquidity add",
"- Marketing push, community events, merch",
"",
"4. Security & Verification",
"Publish verified contract addresses on explorers prior to presale. Do not share private keys.",
"",
"— End of excerpt —"
].join("\n");

    const dwBtn = $('downloadWhitepaper');
    if (dwBtn){
      dwBtn.addEventListener('click', function(){
        const blob = new Blob([whiteText], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href = url; a.download = 'GENZ_WhitePaper.txt';
        document.body.appendChild(a); a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      });
    }

    // Fullscreen whitepaper panel handlers (simplified)
    var openFullBtn = $('openWhitepaperFull');
    var wpPanel = $('whitepaperPanel');
    var wpClose = $('wpClose');
    if (openFullBtn && wpPanel){
      addTap(openFullBtn, function(){
        wpPanel.style.display = 'block';
        wpPanel.focus();
        document.body.style.overflow = 'hidden';
      });
    }
    if (wpClose && wpPanel){
      addTap(wpClose, function(){ wpPanel.style.display = 'none'; document.body.style.overflow = ''; });
    }
    if (wpPanel){
      wpPanel.addEventListener('click', function(e){ if (e.target === wpPanel) { wpPanel.style.display = 'none'; document.body.style.overflow = ''; } });
      wpPanel.addEventListener('keydown', function(e){ if (e.key === 'Escape') { wpPanel.style.display = 'none'; document.body.style.overflow = ''; } });
    }

    // small accessibility: close modal with ESC globally when open
    document.addEventListener('keydown', function(e){ if (e.key === 'Escape'){ if (wpPanel && wpPanel.style.display === 'block'){ wpPanel.style.display = 'none'; document.body.style.overflow = ''; } const gm = document.getElementById('__genz_modal'); if (gm) gm.remove(); } });

    console.log('Handlers installed — Whitepaper fullscreen with background image (no inline view).');

  })();
  </script>
</body>
</html>
